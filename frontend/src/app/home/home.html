<ng-container *ngIf="!hasSearched">
  <div class="hero-container">

    <app-header></app-header>

    <div class="hero-content">
      <h1>Encontre seu novo lar.</h1>
      <p>Repúblicas, quartos e apartamentos para dividir com a sua vibe.</p>

      <div class="big-search-box">
        <input
          (keyup.enter)="onInitialSearch()"
          [formControl]="initialSearch"
          placeholder="Para qual cidade ou bairro você vai?"
          type="text"
        />
        <button (click)="onInitialSearch()" class="btn-big-search">Buscar</button>
      </div>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="hasSearched">
  <div class="dashboard-container">

    <app-header (logoClicked)="goBackHome()"></app-header>

    <div [formGroup]="filterForm" class="search-section">
      <div class="search-bar">
        <input
          (keyup.enter)="onFilter()"
          formControlName="location"
          placeholder="Buscar por cidade..."
          type="text"
        />
        <button (click)="onFilter()" class="btn-search">Buscar</button>
      </div>
    </div>

    <div class="main-content">
      <aside class="sidebar">
        <h3>Filtros</h3>
        <form (ngSubmit)="onFilter()" [formGroup]="filterForm">

          <div class="filter-group">
            <label>Bairro</label>
            <input formControlName="district" placeholder="Ex: Boa Vista" type="text"/>
          </div>

          <div class="filter-group price-group">
            <div>
              <label>Preço Mín.</label>
              <input formControlName="minPrice" placeholder="R$ 0" type="number"/>
            </div>
            <div>
              <label>Preço Máx.</label>
              <input formControlName="maxPrice" placeholder="R$ 2000" type="number"/>
            </div>
          </div>

          <div class="filter-group">
            <label>Tipo de Imóvel</label>
            <select formControlName="propertyType">
              <option value="">Todos os tipos</option>
              <option value="HOUSE">Casa</option>
              <option value="APARTMENT">Apartamento</option>
              <option value="ROOM">Quarto Individual</option>
              <option value="REPUBLIC">República</option>
            </select>
          </div>

          <button (click)="onFilter()" class="btn-filter" type="button">Aplicar Filtros</button>
        </form>
      </aside>

      <section class="results-area">
        <div class="results-header">
          <h2>Resultados da Busca</h2>
          <p>Mostrando imóveis para: <strong>{{ appliedLocation || 'Qualquer lugar' }}</strong></p>
        </div>

        <app-property-list
          [loading]="isLoading"
          [properties]="properties">
        </app-property-list>
      </section>

    </div>
  </div>
</ng-container>
